"use strict";var cov_1606cl48yx=function(){var path="/Users/andela/Documents/EPIC-Mail/src/Server/controllers/users.v1.Controllers.js";var hash="dab4154c1e9302668be2ac4747e1b251a8f81cfa";var Function=function(){}.constructor;var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/andela/Documents/EPIC-Mail/src/Server/controllers/users.v1.Controllers.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:25}},"2":{start:{line:8,column:14},end:{line:8,column:55}},"3":{start:{line:10,column:20},end:{line:10,column:67}},"4":{start:{line:12,column:14},end:{line:12,column:55}},"5":{start:{line:14,column:12},end:{line:14,column:70}},"6":{start:{line:16,column:39},end:{line:16,column:93}},"7":{start:{line:18,column:50},end:{line:18,column:151}},"8":{start:{line:18,column:92},end:{line:18,column:149}},"9":{start:{line:20,column:44},end:{line:20,column:315}},"10":{start:{line:20,column:57},end:{line:20,column:58}},"11":{start:{line:20,column:102},end:{line:20,column:110}},"12":{start:{line:20,column:112},end:{line:20,column:167}},"13":{start:{line:20,column:168},end:{line:20,column:199}},"14":{start:{line:20,column:200},end:{line:20,column:254}},"15":{start:{line:20,column:227},end:{line:20,column:254}},"16":{start:{line:20,column:255},end:{line:20,column:313}},"17":{start:{line:22,column:62},end:{line:22,column:131}},"18":{start:{line:22,column:78},end:{line:22,column:131}},"19":{start:{line:22,column:132},end:{line:22,column:193}},"20":{start:{line:22,column:149},end:{line:22,column:193}},"21":{start:{line:22,column:194},end:{line:22,column:213}},"22":{start:{line:24,column:0},end:{line:24,column:25}},"23":{start:{line:28,column:0},end:{line:106,column:3}},"24":{start:{line:30,column:4},end:{line:30,column:44}},"25":{start:{line:33,column:2},end:{line:103,column:6}},"26":{start:{line:36,column:22},end:{line:36,column:30}},"27":{start:{line:37,column:22},end:{line:37,column:41}},"28":{start:{line:38,column:21},end:{line:38,column:39}},"29":{start:{line:39,column:18},end:{line:39,column:33}},"30":{start:{line:40,column:21},end:{line:40,column:39}},"31":{start:{line:42,column:6},end:{line:76,column:9}},"32":{start:{line:43,column:8},end:{line:43,column:27}},"33":{start:{line:43,column:17},end:{line:43,column:27}},"34":{start:{line:45,column:8},end:{line:50,column:9}},"35":{start:{line:46,column:10},end:{line:49,column:13}},"36":{start:{line:52,column:27},end:{line:52,column:65}},"37":{start:{line:54,column:22},end:{line:58,column:9}},"38":{start:{line:60,column:24},end:{line:62,column:10}},"39":{start:{line:64,column:8},end:{line:75,column:11}},"40":{start:{line:65,column:10},end:{line:65,column:33}},"41":{start:{line:65,column:21},end:{line:65,column:33}},"42":{start:{line:67,column:10},end:{line:74,column:11}},"43":{start:{line:68,column:12},end:{line:73,column:15}},"44":{start:{line:105,column:2},end:{line:105,column:26}},"45":{start:{line:108,column:15},end:{line:108,column:31}},"46":{start:{line:109,column:0},end:{line:109,column:27}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:16,column:9},end:{line:16,column:31}},loc:{start:{line:16,column:37},end:{line:16,column:95}},line:16},"1":{name:"_classCallCheck",decl:{start:{line:18,column:9},end:{line:18,column:24}},loc:{start:{line:18,column:48},end:{line:18,column:153}},line:18},"2":{name:"_defineProperties",decl:{start:{line:20,column:9},end:{line:20,column:26}},loc:{start:{line:20,column:42},end:{line:20,column:317}},line:20},"3":{name:"_createClass",decl:{start:{line:22,column:9},end:{line:22,column:21}},loc:{start:{line:22,column:60},end:{line:22,column:215}},line:22},"4":{name:"(anonymous_4)",decl:{start:{line:28,column:0},end:{line:28,column:1}},loc:{start:{line:28,column:12},end:{line:106,column:1}},line:28},"5":{name:"UsersControllers",decl:{start:{line:29,column:11},end:{line:29,column:27}},loc:{start:{line:29,column:30},end:{line:31,column:3}},line:29},"6":{name:"userSignUp",decl:{start:{line:35,column:20},end:{line:35,column:30}},loc:{start:{line:35,column:41},end:{line:77,column:5}},line:35},"7":{name:"(anonymous_7)",decl:{start:{line:42,column:75},end:{line:42,column:76}},loc:{start:{line:42,column:98},end:{line:76,column:7}},line:42},"8":{name:"(anonymous_8)",decl:{start:{line:64,column:157},end:{line:64,column:158}},loc:{start:{line:64,column:180},end:{line:75,column:9}},line:64}},branchMap:{"0":{loc:{start:{line:16,column:46},end:{line:16,column:92}},type:"cond-expr",locations:[{start:{line:16,column:70},end:{line:16,column:73}},{start:{line:16,column:76},end:{line:16,column:92}}],line:16},"1":{loc:{start:{line:16,column:46},end:{line:16,column:67}},type:"binary-expr",locations:[{start:{line:16,column:46},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:67}}],line:16},"2":{loc:{start:{line:18,column:50},end:{line:18,column:151}},type:"if",locations:[{start:{line:18,column:50},end:{line:18,column:151}},{start:{line:18,column:50},end:{line:18,column:151}}],line:18},"3":{loc:{start:{line:20,column:136},end:{line:20,column:166}},type:"binary-expr",locations:[{start:{line:20,column:136},end:{line:20,column:157}},{start:{line:20,column:161},end:{line:20,column:166}}],line:20},"4":{loc:{start:{line:20,column:200},end:{line:20,column:254}},type:"if",locations:[{start:{line:20,column:200},end:{line:20,column:254}},{start:{line:20,column:200},end:{line:20,column:254}}],line:20},"5":{loc:{start:{line:22,column:62},end:{line:22,column:131}},type:"if",locations:[{start:{line:22,column:62},end:{line:22,column:131}},{start:{line:22,column:62},end:{line:22,column:131}}],line:22},"6":{loc:{start:{line:22,column:132},end:{line:22,column:193}},type:"if",locations:[{start:{line:22,column:132},end:{line:22,column:193}},{start:{line:22,column:132},end:{line:22,column:193}}],line:22},"7":{loc:{start:{line:43,column:8},end:{line:43,column:27}},type:"if",locations:[{start:{line:43,column:8},end:{line:43,column:27}},{start:{line:43,column:8},end:{line:43,column:27}}],line:43},"8":{loc:{start:{line:45,column:8},end:{line:50,column:9}},type:"if",locations:[{start:{line:45,column:8},end:{line:50,column:9}},{start:{line:45,column:8},end:{line:50,column:9}}],line:45},"9":{loc:{start:{line:65,column:10},end:{line:65,column:33}},type:"if",locations:[{start:{line:65,column:10},end:{line:65,column:33}},{start:{line:65,column:10},end:{line:65,column:33}}],line:65},"10":{loc:{start:{line:67,column:10},end:{line:74,column:11}},type:"if",locations:[{start:{line:67,column:10},end:{line:74,column:11}},{start:{line:67,column:10},end:{line:74,column:11}}],line:67}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_1606cl48yx.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1606cl48yx.s[1]++;exports.default=void 0;var _bcrypt=(cov_1606cl48yx.s[2]++,_interopRequireDefault(require("bcrypt")));var _jsonwebtoken=(cov_1606cl48yx.s[3]++,_interopRequireDefault(require("jsonwebtoken")));var _dotenv=(cov_1606cl48yx.s[4]++,_interopRequireDefault(require("dotenv")));var _pool=(cov_1606cl48yx.s[5]++,_interopRequireDefault(require("../database/config/pool")));function _interopRequireDefault(obj){cov_1606cl48yx.f[0]++;cov_1606cl48yx.s[6]++;return(cov_1606cl48yx.b[1][0]++,obj)&&(cov_1606cl48yx.b[1][1]++,obj.__esModule)?(cov_1606cl48yx.b[0][0]++,obj):(cov_1606cl48yx.b[0][1]++,{default:obj});}function _classCallCheck(instance,Constructor){cov_1606cl48yx.f[1]++;cov_1606cl48yx.s[7]++;if(!(instance instanceof Constructor)){cov_1606cl48yx.b[2][0]++;cov_1606cl48yx.s[8]++;throw new TypeError("Cannot call a class as a function");}else{cov_1606cl48yx.b[2][1]++;}}function _defineProperties(target,props){cov_1606cl48yx.f[2]++;cov_1606cl48yx.s[9]++;for(var i=(cov_1606cl48yx.s[10]++,0);i<props.length;i++){var descriptor=(cov_1606cl48yx.s[11]++,props[i]);cov_1606cl48yx.s[12]++;descriptor.enumerable=(cov_1606cl48yx.b[3][0]++,descriptor.enumerable)||(cov_1606cl48yx.b[3][1]++,false);cov_1606cl48yx.s[13]++;descriptor.configurable=true;cov_1606cl48yx.s[14]++;if("value"in descriptor){cov_1606cl48yx.b[4][0]++;cov_1606cl48yx.s[15]++;descriptor.writable=true;}else{cov_1606cl48yx.b[4][1]++;}cov_1606cl48yx.s[16]++;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){cov_1606cl48yx.f[3]++;cov_1606cl48yx.s[17]++;if(protoProps){cov_1606cl48yx.b[5][0]++;cov_1606cl48yx.s[18]++;_defineProperties(Constructor.prototype,protoProps);}else{cov_1606cl48yx.b[5][1]++;}cov_1606cl48yx.s[19]++;if(staticProps){cov_1606cl48yx.b[6][0]++;cov_1606cl48yx.s[20]++;_defineProperties(Constructor,staticProps);}else{cov_1606cl48yx.b[6][1]++;}cov_1606cl48yx.s[21]++;return Constructor;}cov_1606cl48yx.s[22]++;_dotenv.default.config();var UsersControllers=(/*#__PURE__*/cov_1606cl48yx.s[23]++,function(){cov_1606cl48yx.f[4]++;function UsersControllers(){cov_1606cl48yx.f[5]++;cov_1606cl48yx.s[24]++;_classCallCheck(this,UsersControllers);}cov_1606cl48yx.s[25]++;_createClass(UsersControllers,null,[{key:"userSignUp",value:function userSignUp(req,res){cov_1606cl48yx.f[6]++;var _req$body=(cov_1606cl48yx.s[26]++,req.body),firstName=(cov_1606cl48yx.s[27]++,_req$body.firstName),lastName=(cov_1606cl48yx.s[28]++,_req$body.lastName),email=(cov_1606cl48yx.s[29]++,_req$body.email),password=(cov_1606cl48yx.s[30]++,_req$body.password);cov_1606cl48yx.s[31]++;_pool.default.query('SELECT * FROM users WHERE email = $1',[email],function(err,result){cov_1606cl48yx.f[7]++;cov_1606cl48yx.s[32]++;if(err){cov_1606cl48yx.b[7][0]++;cov_1606cl48yx.s[33]++;throw err;}else{cov_1606cl48yx.b[7][1]++;}cov_1606cl48yx.s[34]++;if(result.rows.length>0){cov_1606cl48yx.b[8][0]++;cov_1606cl48yx.s[35]++;return res.status(409).json({status:409,error:'User already exists, Sign In!'});}else{cov_1606cl48yx.b[8][1]++;}var hashPassword=(cov_1606cl48yx.s[36]++,_bcrypt.default.hashSync(password,10));var payload=(cov_1606cl48yx.s[37]++,{firstName:req.body.firstName,lastName:req.body.lastName,email:req.body.email});var userToken=(cov_1606cl48yx.s[38]++,_jsonwebtoken.default.sign(payload,process.env.SECRET_KEY,{expiresIn:1440}));cov_1606cl48yx.s[39]++;_pool.default.query('INSERT INTO users (firstname, lastname, email , password) VALUES ($1, $2, $3, $4)',[firstName,lastName,email,hashPassword],function(error,user){cov_1606cl48yx.f[8]++;cov_1606cl48yx.s[40]++;if(error){cov_1606cl48yx.b[9][0]++;cov_1606cl48yx.s[41]++;throw error;}else{cov_1606cl48yx.b[9][1]++;}cov_1606cl48yx.s[42]++;if(user.rows){cov_1606cl48yx.b[10][0]++;cov_1606cl48yx.s[43]++;return res.status(201).json({status:201,data:[{token:userToken}]});}else{cov_1606cl48yx.b[10][1]++;}});});}//   static userSignIn(req, res) {
//     const user = users.find(userDetails => userDetails.email === req.body.email);
//     if (!user) {
//       return res.status(404).json({
//         status: 404,
//         error: 'Details not found, Sign Up!',
//       });
//     }
//     const { authData, password } = user;
//     const hashValue = bcrypt.compareSync(req.body.password, password);
//     if (!hashValue) {
//       return res.status(401).json({
//         status: 401,
//         error: 'Incorrect password!',
//       });
//     }
//     return res.status(200).json({
//       status: 200,
//       data: [
//         {
//           token: authData,
//         },
//       ],
//     });
//   }
}]);cov_1606cl48yx.s[44]++;return UsersControllers;}());var _default=(cov_1606cl48yx.s[45]++,UsersControllers);cov_1606cl48yx.s[46]++;exports.default=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLnYxLkNvbnRyb2xsZXJzLmpzIl0sIm5hbWVzIjpbImRvdGVudiIsImNvbmZpZyIsIlVzZXJzQ29udHJvbGxlcnMiLCJyZXEiLCJyZXMiLCJib2R5IiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwicG9vbCIsInF1ZXJ5IiwiZXJyIiwicmVzdWx0Iiwicm93cyIsImxlbmd0aCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsImhhc2hQYXNzd29yZCIsImJjcnlwdCIsImhhc2hTeW5jIiwicGF5bG9hZCIsInVzZXJUb2tlbiIsImp3dCIsInNpZ24iLCJwcm9jZXNzIiwiZW52IiwiU0VDUkVUX0tFWSIsImV4cGlyZXNJbiIsInVzZXIiLCJkYXRhIiwidG9rZW4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7OztBQUVBQSxnQkFBT0MsTUFBUDs7SUFFTUMsZ0I7Ozs7Ozs7OzsrQkFDY0MsRyxFQUFLQyxHLEVBQUs7QUFBQSxzQkFHdEJELEdBQUcsQ0FBQ0UsSUFIa0I7QUFBQSxVQUV4QkMsU0FGd0IsYUFFeEJBLFNBRndCO0FBQUEsVUFFYkMsUUFGYSxhQUViQSxRQUZhO0FBQUEsVUFFSEMsS0FGRyxhQUVIQSxLQUZHO0FBQUEsVUFFSUMsUUFGSixhQUVJQSxRQUZKOztBQUkxQkMsb0JBQUtDLEtBQUwsQ0FBVyxzQ0FBWCxFQUFtRCxDQUFDSCxLQUFELENBQW5ELEVBQTRELFVBQUNJLEdBQUQsRUFBTUMsTUFBTixFQUFpQjtBQUMzRSxZQUFJRCxHQUFKLEVBQVMsTUFBTUEsR0FBTjs7QUFDVCxZQUFJQyxNQUFNLENBQUNDLElBQVAsQ0FBWUMsTUFBWixHQUFxQixDQUF6QixFQUE0QjtBQUMxQixpQkFBT1gsR0FBRyxDQUFDWSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUI7QUFDMUJELFlBQUFBLE1BQU0sRUFBRSxHQURrQjtBQUUxQkUsWUFBQUEsS0FBSyxFQUFFO0FBRm1CLFdBQXJCLENBQVA7QUFJRDs7QUFDRCxZQUFNQyxZQUFZLEdBQUdDLGdCQUFPQyxRQUFQLENBQWdCWixRQUFoQixFQUEwQixFQUExQixDQUFyQjs7QUFDQSxZQUFNYSxPQUFPLEdBQUc7QUFDZGhCLFVBQUFBLFNBQVMsRUFBRUgsR0FBRyxDQUFDRSxJQUFKLENBQVNDLFNBRE47QUFFZEMsVUFBQUEsUUFBUSxFQUFFSixHQUFHLENBQUNFLElBQUosQ0FBU0UsUUFGTDtBQUdkQyxVQUFBQSxLQUFLLEVBQUVMLEdBQUcsQ0FBQ0UsSUFBSixDQUFTRztBQUhGLFNBQWhCOztBQUtBLFlBQU1lLFNBQVMsR0FBR0Msc0JBQUlDLElBQUosQ0FBU0gsT0FBVCxFQUFrQkksT0FBTyxDQUFDQyxHQUFSLENBQVlDLFVBQTlCLEVBQTBDO0FBQUVDLFVBQUFBLFNBQVMsRUFBRTtBQUFiLFNBQTFDLENBQWxCOztBQUNBbkIsc0JBQUtDLEtBQUwsQ0FBVyxtRkFBWCxFQUNFLENBQUNMLFNBQUQsRUFBWUMsUUFBWixFQUFzQkMsS0FBdEIsRUFBNkJXLFlBQTdCLENBREYsRUFDOEMsVUFBQ0QsS0FBRCxFQUFRWSxJQUFSLEVBQWlCO0FBQzNELGNBQUlaLEtBQUosRUFBVyxNQUFNQSxLQUFOOztBQUNYLGNBQUlZLElBQUksQ0FBQ2hCLElBQVQsRUFBZTtBQUNiLG1CQUFPVixHQUFHLENBQUNZLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUMxQkQsY0FBQUEsTUFBTSxFQUFFLEdBRGtCO0FBRTFCZSxjQUFBQSxJQUFJLEVBQUUsQ0FDSjtBQUNFQyxnQkFBQUEsS0FBSyxFQUFFVDtBQURULGVBREk7QUFGb0IsYUFBckIsQ0FBUDtBQVFEO0FBQ0YsU0FiSDtBQWNELE9BN0JEO0FBOEJELEssQ0FFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztlQUllckIsZ0IiLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuZGVsYS9Eb2N1bWVudHMvRVBJQy1NYWlsL3NyYy9TZXJ2ZXIvY29udHJvbGxlcnMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdCc7XG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XG5pbXBvcnQgcG9vbCBmcm9tICcuLi9kYXRhYmFzZS9jb25maWcvcG9vbCc7XG5cbmRvdGVudi5jb25maWcoKTtcblxuY2xhc3MgVXNlcnNDb250cm9sbGVycyB7XG4gIHN0YXRpYyB1c2VyU2lnblVwKHJlcSwgcmVzKSB7XG4gICAgY29uc3Qge1xuICAgICAgZmlyc3ROYW1lLCBsYXN0TmFtZSwgZW1haWwsIHBhc3N3b3JkLFxuICAgIH0gPSByZXEuYm9keTtcbiAgICBwb29sLnF1ZXJ5KCdTRUxFQ1QgKiBGUk9NIHVzZXJzIFdIRVJFIGVtYWlsID0gJDEnLCBbZW1haWxdLCAoZXJyLCByZXN1bHQpID0+IHtcbiAgICAgIGlmIChlcnIpIHRocm93IGVycjtcbiAgICAgIGlmIChyZXN1bHQucm93cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwOSkuanNvbih7XG4gICAgICAgICAgc3RhdHVzOiA0MDksXG4gICAgICAgICAgZXJyb3I6ICdVc2VyIGFscmVhZHkgZXhpc3RzLCBTaWduIEluIScsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgaGFzaFBhc3N3b3JkID0gYmNyeXB0Lmhhc2hTeW5jKHBhc3N3b3JkLCAxMCk7XG4gICAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgICBmaXJzdE5hbWU6IHJlcS5ib2R5LmZpcnN0TmFtZSxcbiAgICAgICAgbGFzdE5hbWU6IHJlcS5ib2R5Lmxhc3ROYW1lLFxuICAgICAgICBlbWFpbDogcmVxLmJvZHkuZW1haWwsXG4gICAgICB9O1xuICAgICAgY29uc3QgdXNlclRva2VuID0gand0LnNpZ24ocGF5bG9hZCwgcHJvY2Vzcy5lbnYuU0VDUkVUX0tFWSwgeyBleHBpcmVzSW46IDE0NDAgfSk7XG4gICAgICBwb29sLnF1ZXJ5KCdJTlNFUlQgSU5UTyB1c2VycyAoZmlyc3RuYW1lLCBsYXN0bmFtZSwgZW1haWwgLCBwYXNzd29yZCkgVkFMVUVTICgkMSwgJDIsICQzLCAkNCknLFxuICAgICAgICBbZmlyc3ROYW1lLCBsYXN0TmFtZSwgZW1haWwsIGhhc2hQYXNzd29yZF0sIChlcnJvciwgdXNlcikgPT4ge1xuICAgICAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgaWYgKHVzZXIucm93cykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgICAgICAgICAgc3RhdHVzOiAyMDEsXG4gICAgICAgICAgICAgIGRhdGE6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICB0b2tlbjogdXNlclRva2VuLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbi8vICAgc3RhdGljIHVzZXJTaWduSW4ocmVxLCByZXMpIHtcbi8vICAgICBjb25zdCB1c2VyID0gdXNlcnMuZmluZCh1c2VyRGV0YWlscyA9PiB1c2VyRGV0YWlscy5lbWFpbCA9PT0gcmVxLmJvZHkuZW1haWwpO1xuLy8gICAgIGlmICghdXNlcikge1xuLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbi8vICAgICAgICAgc3RhdHVzOiA0MDQsXG4vLyAgICAgICAgIGVycm9yOiAnRGV0YWlscyBub3QgZm91bmQsIFNpZ24gVXAhJyxcbi8vICAgICAgIH0pO1xuLy8gICAgIH1cbi8vICAgICBjb25zdCB7IGF1dGhEYXRhLCBwYXNzd29yZCB9ID0gdXNlcjtcbi8vICAgICBjb25zdCBoYXNoVmFsdWUgPSBiY3J5cHQuY29tcGFyZVN5bmMocmVxLmJvZHkucGFzc3dvcmQsIHBhc3N3b3JkKTtcbi8vICAgICBpZiAoIWhhc2hWYWx1ZSkge1xuLy8gICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbi8vICAgICAgICAgc3RhdHVzOiA0MDEsXG4vLyAgICAgICAgIGVycm9yOiAnSW5jb3JyZWN0IHBhc3N3b3JkIScsXG4vLyAgICAgICB9KTtcbi8vICAgICB9XG4vLyAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbi8vICAgICAgIHN0YXR1czogMjAwLFxuLy8gICAgICAgZGF0YTogW1xuLy8gICAgICAgICB7XG4vLyAgICAgICAgICAgdG9rZW46IGF1dGhEYXRhLFxuLy8gICAgICAgICB9LFxuLy8gICAgICAgXSxcbi8vICAgICB9KTtcbi8vICAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJzQ29udHJvbGxlcnM7XG4iXX0=