{"version":3,"sources":["messagesControllers.js"],"names":["messagesControllers","req","res","body","error","status","json","details","message","replace","data","id","messages","length","createdOn","Date","toLocaleString","subject","parentMessageId","receivedMessage","filter","receivedUnreadMessage"],"mappings":";;;;;;;AAAA;;AACA;;;;;;;;;;IAEMA,mB;;;;;;;;;gCACeC,G,EAAKC,G,EAAK;AAAA,kCACT,qCAAuBD,GAAG,CAACE,IAA3B,CADS;AAAA,UACnBC,KADmB,yBACnBA,KADmB;;AAE3B,UAAIA,KAAJ,EAAW;AACT,eAAOF,GAAG,CAACG,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BD,UAAAA,MAAM,EAAE,GADkB;AAE1BD,UAAAA,KAAK,EAAEA,KAAK,CAACG,OAAN,CAAc,CAAd,EAAiBC,OAAjB,CAAyBC,OAAzB,CAAiC,QAAjC,EAA2C,EAA3C;AAFmB,SAArB,CAAP;AAID;;AACD,aAAOP,GAAG,CAACG,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BD,QAAAA,MAAM,EAAE,GADkB;AAE1BK,QAAAA,IAAI,EAAE,CACJ;AACEC,UAAAA,EAAE,EAAEC,mBAASC,MAAT,GAAkB,CADxB;AAEEC,UAAAA,SAAS,EAAG,IAAIC,IAAJ,GAAWC,cAAX,EAFd;AAGEC,UAAAA,OAAO,EAAEhB,GAAG,CAACE,IAAJ,CAASc,OAHpB;AAIET,UAAAA,OAAO,EAAEP,GAAG,CAACE,IAAJ,CAASK,OAJpB;AAKEU,UAAAA,eAAe,EAAEN,mBAASC,MAAT,GAAkB,CALrC;AAMER,UAAAA,MAAM,EAAE;AANV,SADI;AAFoB,OAArB,CAAP;AAaD;;;oCAEsBJ,G,EAAKC,G,EAAK;AAC/B,UAAMiB,eAAe,GAAGP,mBAASQ,MAAT,CAAgB,UAAAZ,OAAO;AAAA,eAAIA,OAAO,CAACH,MAAR,KAAmB,MAAvB;AAAA,OAAvB,CAAxB;;AACA,aAAOH,GAAG,CAACG,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BD,QAAAA,MAAM,EAAE,GADkB;AAE1BK,QAAAA,IAAI,EAAE,CACJS,eADI;AAFoB,OAArB,CAAP;AAMD;;;0CAE4BlB,G,EAAKC,G,EAAK;AACrC,UAAMmB,qBAAqB,GAAGT,mBAASQ,MAAT,CAAgB,UAAAZ,OAAO;AAAA,eAAIA,OAAO,CAACH,MAAR,KAAmB,QAAvB;AAAA,OAAvB,CAA9B;;AACA,aAAOH,GAAG,CAACG,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BD,QAAAA,MAAM,EAAE,GADkB;AAE1BK,QAAAA,IAAI,EAAE,CACJW,qBADI;AAFoB,OAArB,CAAP;AAMD;;;;;;eAGYrB,mB","sourceRoot":"C:\\Users\\Blessing Abobo\\EPIC-Mail\\Server\\controllers","sourcesContent":["import { messages } from '../dummy/database';\r\nimport validateMessageDetails from '../middlewares/validateMessageDetails';\r\n\r\nclass messagesControllers {\r\n  static sendMessage(req, res) {\r\n    const { error } = validateMessageDetails(req.body);\r\n    if (error) {\r\n      return res.status(400).json({\r\n        status: 400,\r\n        error: error.details[0].message.replace(/[\"\"]+/g, ''),\r\n      });\r\n    }\r\n    return res.status(200).json({\r\n      status: 200,\r\n      data: [\r\n        {\r\n          id: messages.length + 1,\r\n          createdOn: (new Date().toLocaleString()),\r\n          subject: req.body.subject,\r\n          message: req.body.message,\r\n          parentMessageId: messages.length + 1,\r\n          status: 'sent',\r\n        },\r\n      ],\r\n    });\r\n  }\r\n\r\n  static receivedMessage(req, res) {\r\n    const receivedMessage = messages.filter(message => message.status === 'read');\r\n    return res.status(200).json({\r\n      status: 200,\r\n      data: [\r\n        receivedMessage,\r\n      ],\r\n    });\r\n  }\r\n\r\n  static receivedUnreadMessage(req, res) {\r\n    const receivedUnreadMessage = messages.filter(message => message.status === 'unread');\r\n    return res.status(200).json({\r\n      status: 200,\r\n      data: [\r\n        receivedUnreadMessage,\r\n      ],\r\n    });\r\n  }\r\n}\r\n\r\nexport default messagesControllers;\r\n"]}